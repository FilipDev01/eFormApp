<form [formGroup]="section" (ngSubmit)="onSubmit()">
  <mat-form-field>
    <mat-label>Škola Názov</mat-label>
    <input matInput type="text" min="0" placeholder="Počet" formControlName="school_name">
  </mat-form-field>

  <mat-form-field>
    <mat-label>Ročník</mat-label>
    <input matInput type="text" min="0" placeholder="Počet" formControlName="school_year">
  </mat-form-field>


  <mat-form-field [class.mat-input-invalid]="isInvalid" [class.mat-form-field-invalid]="isInvalid">
    <mat-label>Počet žiakov</mat-label>
    <input matInput type="number" min="0" placeholder="Počet" formControlName="no_students">
  </mat-form-field>

  <p class="my-1"><strong>Osvety</strong></p>

  <table class="table table-responsive enlightenment-table mb-0">
    <tbody>
      <ng-container *ngIf="school_codes?.controls" formArrayName="school_codes">
        <tr *ngFor="let item of school_codes.controls; index as i">
          <ng-container [formGroupName]="i">
            <td class="table-colum-code pl-0" colspan="1">
              <mat-form-field class="p-0">
                <mat-label>Kód</mat-label>
                <mat-select #matSelectC class="eform-mat-select" name="a" formControlName="description">
                  <mat-select-trigger>
                    {{item.value.description}}
                  </mat-select-trigger>
                  <header class="mat-select">
                    <h4 class="text-center mb-0 py-3">Vyber Kód</h4>
                    <mat-divider class="table-divider"></mat-divider>
                  </header>
                  <div class="custom-panel">
                    <mat-option *ngFor="let enlightenmentOption of enlightenmentOptions"
                      [value]="enlightenmentOption.code">
                      <small>{{enlightenmentOption.code}}: {{enlightenmentOption.description}}</small>
                    </mat-option>
                  </div>
                  <footer class="mat-select mt-footer">
                    <button mat-raised-button (click)="handleSelectionAction('a');" type="button">Zruš</button>
                  </footer>
                </mat-select>
              </mat-form-field>
            </td>
            <td class="px-0">
              <mat-form-field class="p-0">
                <mat-label>Počet</mat-label>
                <input matInput type="number" min="0" name="a" formControlName="count">
              </mat-form-field>
            </td>
            <td class="table-column-action pr-0">
              <p class="text-danger" (click)="removeCode(section.controls.school_codes, item)">X</p>
            </td>
          </ng-container>
        </tr>
        <tr>
          <td class="text-start" style="padding-right: 0 !important;" colspan="3">
            <button mat-flat-button class="bg-success mt-2 pb-0 px-2 btn-add-e"
              (click)="addCode(section, 'school_codes')" type="button">
              Pridaj Osvetu
            </button>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>

  <p *ngIf="isInvalid" class="e-wizard-err-msg">
    <small>Počet osôb sa nezhoduje s počtom interakcií!</small>
  </p>
  <mat-divider class="mt-3 mb-2"></mat-divider>

  <div class="d-flex justify-content-between">
    <button mat-raised-button type="button" (click)="goBack()">Späť</button>
    <button mat-flat-button color="primary" type="submit">Ďalej</button>
  </div>
</form>


<!-- <mat-form-field>
  <mat-label>Škola Názov</mat-label>
  <input matInput type="text" placeholder="Názov" [(ngModel)]="sectionC.school_name">
</mat-form-field>

<mat-form-field>
  <mat-label>Ročník</mat-label>
  <input matInput type="text" placeholder="Ročník" [(ngModel)]="sectionC.school_year">
</mat-form-field>

<mat-form-field>
  <mat-label>Počet žiakov</mat-label>
  <input matInput type="number" min="0" placeholder="Počet" [(ngModel)]="sectionC.no_students">
</mat-form-field>

<p class="my-1"><strong>Osvety</strong></p>

<table class="table table-responsive enlightenment-table mb-0">
  <tbody>
    <tr *ngFor="let item of sectionC.school_codes; let ind = index">
      <td class="table-colum-code pl-0" colspan="1">
        <mat-form-field class="p-0">
          <mat-label>Kód</mat-label>
          <mat-select #matSelectC class="eform-mat-select" name="c" [(ngModel)]="item.description">
            <mat-select-trigger>
              {{item.description}}
            </mat-select-trigger>

            <header class="mat-select">
              <h4 class="text-center mb-0 py-3">Vyber Kód</h4>
              <mat-divider class="table-divider"></mat-divider>
            </header>
            <div class="custom-panel">
              <mat-option *ngFor="let enlightenmentOption of enlightenmentOptions"
                [value]="enlightenmentOption.code">
                <small>{{enlightenmentOption.code}}: {{enlightenmentOption.description}}</small>
              </mat-option>
            </div>
            <footer class="mat-select mt-footer">
              <button mat-raised-button (click)="handleSelectionAction('c');">Zruš</button>
            </footer>
          </mat-select>
        </mat-form-field>
      </td>
      <td class="px-0">
        <mat-form-field class="p-0">
          <mat-label>Počet</mat-label>
          <input matInput type="number" min="0" name="a" [(ngModel)]="item.count">
        </mat-form-field>
      </td>
      <td class="table-column-action pr-0">
        <p class="text-danger" (click)="removeCode(sectionC.school_codes, item)">X</p>
      </td>
    </tr>

    <tr>
      <td class="text-start" colspan="3">
        <button mat-flat-button class="bg-success py-0 px-2 btn-add-e"
          (click)="addCode(sectionC, 'school_codes')">
          Pridaj Osvetu
        </button>
      </td>
    </tr>
  </tbody>
</table>

<mat-divider class="mt-3 mb-2"></mat-divider>

<div class="d-flex justify-content-between">
  <button mat-raised-button matStepperPrevious>Späť</button>
  <button mat-flat-button color="primary" matStepperNext>Ďalej</button>
</div> -->
